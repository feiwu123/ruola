webpackJsonp([7],{"3MHa":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("GxbW"),n=s("0881"),i=s("2CU/"),o=s("TVmP"),c=s("DmT9"),l=s.n(c),r=(i.a.encryptRsa,i.a.decryptRsa,i.a.pwdEncrypt,{name:"FactorySKU",data:function(){return{mag_name:"整单发货扫码系统",login_tip:"FACTORY SKU SYSTEM",sku:{placeholder:"SKU",value:""},loading:!1,number:0,can_enter:!0,new_20th:[],last_code:"",last_size:""}},components:{"footer-c":o.a},methods:{newSKU:function(){var e=this;if(!this.loading&&this.can_enter&&this.sku.value){this.can_enter=!1,this.loading=!0;var t=this.sku.value,s=this.$store.state.user.key;t=t.replace(/\s/g,"");var n=/^([a-z0-9\.\-]+)-([a-z0-9]+)$/i.exec(t),i="",o="";n?(i=n[1],o=n[2],a.a.cRequest(this,"/process/factory/new",{key:s,code:i,size:o},function(t){e.can_enter=!0,e.loading=!1,t&&t.result&&t.result[0]?(e.number++,a.a.showTip(e,"success","记录成功！"),e.last_code=i,e.last_size=o,e.sku.value="",e.$notify({title:"成功录入!",message:"订单名称："+t.result[0].name+"；SKU："+t.result[0].code+"-"+t.result[0].size})):(a.a.showTip(e,"warning","记录失败，该SKU不处于可录入订单内！"),e.sku.value="")})):a.a.showTip(this,"warning","记录失败，该SKU不处于可录入订单内！")}},back99To98:function(){var e=this,t=this.$store.state.user.key,s=this.last_code,n=this.last_size;a.a.cRequest(this,"/process/factory/back/99/98",{key:t,code:s,size:n},function(t){t&&t.result&&t.result[0]&&t.result[0].affectedRows>0?(a.a.showTip(e,"success","撤销成功！"),e.last_code="",e.last_size=""):a.a.showTip(e,"warning","撤销失败！")})}},mounted:function(){var e=this,t=l()(n.a.ip,{path:"/factory/send"});t.on("connect",function(e){}),t.on("flesh",function(t){var s=JSON.parse(i.a.decryptRsa(t));e.new_20th=s.reverse()})}}),u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-wrap label-print",on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.newSKU(t)}}},[s("el-card",{staticClass:"form-wrap"},[s("h1",{staticClass:"mag-name"},[e._v(e._s(e.mag_name))]),e._v(" "),s("p",{staticClass:"login-tip"},[e._v(e._s(e.login_tip))]),e._v(" "),s("el-input",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"ipt",attrs:{placeholder:e.sku.placeholder,type:"text"},on:{blur:function(e){e.target.focus()}},model:{value:e.sku.value,callback:function(t){e.$set(e.sku,"value",t)},expression:"sku.value"}}),e._v(" "),s("el-button",{on:{click:function(t){e.number=0}}},[e._v(e._s(e.number)+"（点击计数清零）")]),e._v(" "),e.last_code?s("el-button",{on:{click:e.back99To98}},[e._v("返回上一次")]):e._e()],1),e._v(" "),e.new_20th.length>0?s("el-card",{staticClass:"info",staticStyle:{width:"auto",position:"fixed",bottom:"20px",left:"20px","font-size":"12px","z-index":"-1"}},e._l(e.new_20th,function(t,a){return s("p",{key:a,staticStyle:{"margin-bottom":"10px"}},[e._v("\n      <"+e._s(t.time)+">"+e._s(t.sku)+" ====> "+e._s(t.name)+"\n    ")])})):e._e(),e._v(" "),s("footer-c",{staticClass:"footer",staticStyle:{position:"absolute",bottom:"0"}})],1)},staticRenderFns:[]};var _=s("VU/8")(r,u,!1,function(e){s("8MKs"),s("Q8kU")},"data-v-49edfbae",null);t.default=_.exports},"8MKs":function(e,t){},Q8kU:function(e,t){}});