webpackJsonp([10],{MzCJ:function(t,e){},i6Ph:function(t,e){},"v+oI":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("GxbW"),a=n("0881"),i=n("2CU/"),o=n("TVmP"),l=n("DmT9"),u=n.n(l),c=n("2736"),r=(i.a.encryptRsa,i.a.decryptRsa,i.a.pwdEncrypt,{name:"login",data:function(){return{mag_name:"质检扫码系统",login_tip:"QUALITY SYSTEM",sku:{placeholder:"SKU",value:""},loading:!1,number:0,can_enter:!0,new_20th:[],last_sku:""}},components:{"footer-c":o.a},methods:{getLabel:function(){this.printLabel(),s.a.showTip(this,"warning","打印任务已提交，请稍等片刻！")},back1To0:function(){var t=this,e=this.$store.state.user.key,n=this.last_sku;s.a.cRequest(this,"/process/back/1/0",{key:e,sku:n},function(e){e&&e.result&&e.result[0]&&e.result[0].changedRows>0?(s.a.showTip(t,"success","撤销成功！"),t.last_sku=""):s.a.showTip(t,"warning","撤销失败！")})},printLabel:function(){this.LODOP&&(this.LODOP.PRINT_INIT("质检打印任务："+this.sku.value),this.LODOP.ADD_PRINT_TEXT(168,0,100,20,this.sku.value),this.LODOP.ADD_PRINT_BARCODE(0,0,168,146,"QRCode",this.sku.value),this.LODOP.PRINT())}},mounted:function(){var t=this,e=u()(a.a.ip,{path:"/transfer"});console.log(e),e.on("connect",function(t){console.log("connect io",t)}),e.on("flesh",function(e){var n=JSON.parse(i.a.decryptRsa(e));t.new_20th=n.reverse()}),c.a.init(),this.LODOP=c.a.getLodop()}}),p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-wrap label-print",on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.getLabel(e)}}},[n("el-card",{staticClass:"form-wrap"},[n("h1",{staticClass:"mag-name"},[t._v(t._s(t.mag_name))]),t._v(" "),n("p",{staticClass:"login-tip"},[t._v(t._s(t.login_tip))]),t._v(" "),n("el-input",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"ipt",attrs:{placeholder:t.sku.placeholder,type:"text"},on:{blur:function(t){t.target.focus()}},model:{value:t.sku.value,callback:function(e){t.$set(t.sku,"value",e)},expression:"sku.value"}}),t._v(" "),n("el-button",{on:{click:function(e){t.number=0}}},[t._v(t._s(t.number)+"（点击计数清零）")]),t._v(" "),t.last_sku?n("el-button",{on:{click:t.back1To0}},[t._v("返回上一次")]):t._e()],1),t._v(" "),t.new_20th.length>0?n("el-card",{staticClass:"info",staticStyle:{width:"auto",position:"fixed",bottom:"20px",left:"20px","font-size":"12px","z-index":"-1"}},t._l(t.new_20th,function(e,s){return n("p",{key:s,staticStyle:{"margin-bottom":"10px"}},[t._v("\n      <"+t._s(e.time)+">"+t._s(e.sku)+" ====> "+t._s(e.no)+"\n    ")])})):t._e(),t._v(" "),n("footer-c",{staticClass:"footer",staticStyle:{position:"absolute",bottom:"0"}})],1)},staticRenderFns:[]};var _=n("VU/8")(r,p,!1,function(t){n("MzCJ"),n("i6Ph")},"data-v-0ea5de97",null);e.default=_.exports}});